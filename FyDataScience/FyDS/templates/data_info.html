{% extends 'base.html' %}

{% block title %}Buscar Ação{% endblock %}

{% block content %}

<form method="post">
    {% csrf_token %}
    <div class="mb-3">
        <input type="text" name="simbolo" class="form-control" placeholder="Digite o código da ação (ex: AAPL, PETR4.SA)">
    </div>
    <button type="submit" class="btn btn-primary">Buscar</button>
</form>

{% if erro %}
    <div class="alert alert-danger mt-3">{{ erro }}</div>
{% endif %}

{% if dados_disponiveis %}
    <h4 class="mt-4">Últimos dados:</h4>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Data</th>
                <th>Abertura</th>
                <th>Fechamento</th>
                <th>Alta</th>
                <th>Baixa</th>
                <th>Volume</th>
            </tr>
        </thead>
        <tbody>
            {% for data, row in dados_acao.iterrows %}
            <tr>
                <td>{{ data.date }}</td>
                <td>{{ row.Open }}</td>
                <td>{{ row.Close }}</td>
                <td>{{ row.High }}</td>
                <td>{{ row.Low }}</td>
                <td>{{ row.Volume }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endif %}

{% if info_geral %}
    <h4 class="mt-4">Informações gerais:</h4>
    <ul class="list-group">
        <li class="list-group-item"><strong>Nome:</strong> {{ info_geral.longName }}</li>
        <li class="list-group-item"><strong>Setor:</strong> {{ info_geral.sector }}</li>
        <li class="list-group-item"><strong>Indústria:</strong> {{ info_geral.industry }}</li>
        <li class="list-group-item"><strong>CEO:</strong> {{ info_geral.ceo }}</li>
        <li class="list-group-item"><strong>Localização:</strong> {{ info_geral.address1 }}, {{ info_geral.city }}, {{ info_geral.state }}</li>
        <li class="list-group-item"><strong>Website:</strong> <a href="{{ info_geral.website }}" target="_blank">{{ info_geral.website }}</a></li>
        <li class="list-group-item"><strong>Descrição:</strong> {{ info_geral.longBusinessSummary }}</li>
    </ul>
{% endif %}

{% endblock %}
